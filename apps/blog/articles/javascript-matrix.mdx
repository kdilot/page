import { Tags, Title } from '@page/blog/ui'

<Title title="Javascript 2차원 배열 초기화시 이슈" year={2022} />

<Tags data={['Javascript']} />

## 이슈내용

Array().fill()을 사용해서 2차원 배열을 초기화 했을 때 배열의 값을 변경하면 일괄적으로 변경이 되는 현상

### 1차원 배열(Array fill)

```ts
// 배열 초기화
const arr = new Array(10).fill(0)
// 배열 값 : [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

// 배열 수정
arr[5] = 1
// 수정된 배열 값 : [0, 0, 0, 0, 0, 1, 0, 0, 0, 0]
```

### 2차원 배열(Array fill)

```ts
// 배열 초기화
const arr = new Array(10).fill(new Array(3).fill(0))
// 배열 값 : [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]

// 배열 수정
arr[2][2] = 1
// 수정된 배열 값 : [[0, 0, 1], [0, 0, 1], [0, 0, 1], [0, 0, 1], [0, 0, 1], [0, 0, 1], [0, 0, 1], [0, 0, 1], [0, 0, 1], [0, 0, 1]]
```

3번째 배열의 마지막 값이 1로 수정되길 기대했으나 모든 배열의 마지막 값이 1로 수정되어 있는 것을 확인할 수 있다 <br/>
1차원 배열에서는 문제가 없었으나 2차원 배열에서는 얕은 복사를 사용하기 때문에 같은 주소를 바라보게 됨

### 2차원 배열(Array from)

```ts
// 배열 초기화
const arr = Array.from(new Array(10), () => new Array(3).fill(0))
// 배열 값 : [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]

// 배열 수정
arr[2][2] = 1
// 수정된 배열 값 : [[0, 0, 0], [0, 0, 0], [0, 0, 1], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]
```

위 방식을 사용하면 예상 하는대로 2차원 배열의 값이 수정되는 것을 확인할 수 있다

## 코멘트

- 주로 1차원 배열에서만 쓰다보니 얕은 복사라는 것을 인지 안하고 쓰면서 생기는 이슈
- 작은 로직에서는 코드량이 적어 금방 이슈를 찾을 수 있지만 복잡하고 큰 로직에서는 놓치기 쉬운 부분이므로 작업시에 내용을 인지하고 있어야 함
